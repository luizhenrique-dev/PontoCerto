<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<ui:composition template="/templates/principal.xhtml">
    <ui:define name="titulo">
        Marcar ponto
    </ui:define>
    <ui:define name="corpo">
        <h3>Registre seu Ponto de...</h3>

        <p:outputLabel style="font-weight: bold" value="Horário atual"/><br/>
        <p:clock pattern="dd/MM/yyy HH:mm:ss" mode="server"/><br/><br/><br/>

        <h:form id="cadastro">
            <p:messages id="messages" autoUpdate="true" closable="true"/>
            <p:growl id="growl" sticky="true" life="2000"/>

            <h:panelGrid columns="1">
                <p:commandButton value="Entrada" actionListener="#{pontoDoDiaBean.marcarPontoDeEntrada}" update="growl"
                                 icon="fa fa-clock-o"/>
                <br/>
                <p:commandButton value="Saída para Almoço" actionListener="#{pontoDoDiaBean.marcarPontoDeSaidaAlmoco}"
                                 update="growl"
                                 icon="fa fa-clock-o"/>
                <br/>
                <p:commandButton value="Entrada da Tarde" actionListener="#{pontoDoDiaBean.marcarPontoDeEntradaTarde}"
                                 update="growl"
                                 icon="fa fa-clock-o"/>
                <br/>
                <p:commandButton value="Saída" actionListener="#{pontoDoDiaBean.marcarPontoDeSaida}" update="growl"
                                 icon="fa fa-clock-o"/>
            </h:panelGrid>
        </h:form>
        <br/>
        <h:form id="formPontoDoDia">
            <p:growl id="msgs" showDetail="true" life="6000" autoUpdate="true"/>
            <p:messages id="mensagens" showDetail="true" autoUpdate="true" closable="true"/>
            <p:dataTable id="tablePontos" var="pontoDoDia" value="#{pontoDoDiaBean.lista}"
                         selectionMode="single"
                         reflow="true"
                         selection="#{pontoDoDiaBean.pontoDoDia}" rowKey="#{pontoDoDia.id}"
                         paginator="true"
                         rows="20"
                         resizableColumns="true"
                         liveResize="true"
                         emptyMessage="Nenhum registro encontrado.">

                <p:column headerText="Horário de Entrada" sortBy="#{pontoDoDia.horaEntrada}">
                    <h:outputText value="#{pontoDoDia.horaEntrada}"/>
                </p:column>

                <p:column headerText="Horário de Saída para Almoço">
                    <h:outputText value="#{pontoDoDia.horaSaidaAlmoco}"/>
                </p:column>

                <p:column headerText="Horário de Entrada da Tarde">
                    <h:outputText value="#{pontoDoDia.horaEntradaTarde}"/>
                </p:column>

                <p:column headerText="Horário de Saída">
                    <h:outputText value="#{pontoDoDia.horaSaida}"/>
                </p:column>

                <p:column style="width: 50px">
                    <div style="width: 100%; text-align: center;">
                        <p:commandLink action="/restrito/ponto"
                                       update="formPontoDoDia:tablePontos, :formPontoDoDia:mensagens">
                            <h:graphicImage library="imagens" name="editar24.png" style="border:0"/>
                            <f:setPropertyActionListener target="#{pontoDoDiaBean.pontoDoDia}"
                                                         value="#{pontoDoDia}"/>
                        </p:commandLink>
                    </div>
                </p:column>

                <p:column style="width: 50px">
                    <div style="width: 100%; text-align: center;">
                        <p:commandLink action="#{pontoDoDiaBean.excluir}"
                                       update="formPontoDoDia:tablePontos, :formPontoDoDia:mensagens"
                                       onclick="if (!confirm('Você realmente deseja excluir o ponto: #{pontoDoDia}?'))
                                                       return false;">
                            <h:graphicImage library="imagens" name="excluir24.png" style="border:0"/>
                            <f:setPropertyActionListener target="#{pontoDoDiaBean.pontoDoDia}"
                                                         value="#{pontoDoDia}"/>
                        </p:commandLink>
                    </div>
                </p:column>
            </p:dataTable>
        </h:form>
    </ui:define>
</ui:composition>
</html>
